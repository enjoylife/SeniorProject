<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - www/js/profileCtrl.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>www/js/profileCtrl.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">75.77</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">165</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">16.16</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">0.85</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">function saveUser (user){
  localStorage.setItem(&#039;user&#039;, JSON.stringify(user));
}

function loadUser(){
  return JSON.parse(localStorage.getItem(&#039;user&#039;))
}




app.controller(&#039;profileCtrl&#039;,function($scope, DataStore, $state, $ionicModal,$ionicSlideBoxDelegate){

  // Take a user to the last read sectoin
  $scope.buttonLeft = function(){
    var last = DataStore.getGlobalLast();
    $state.go(&#039;content.sections&#039;, last)
  }


 // Load up the tutorial template
 $ionicModal.fromTemplateUrl(&#039;templates/introModal.html&#039;, {
    scope: $scope
  }).then(function(modal) {
    $scope.modal = modal;
  });

   // Used as a callback to close on last page of tutorial
  $scope.slideChanged = function(index){
    // On Last slide
    if($ionicSlideBoxDelegate.currentIndex()+1 ==$ionicSlideBoxDelegate.slidesCount()){
      $scope.closeModal()
    }
  }

 $scope.closeModal = function() {
    $scope.modal.hide();
  };

  //Cleanup the modal when we&#039;re done with it!
  $scope.$on(&#039;$destroy&#039;, function() {
    $scope.modal.remove();
  });

  // Determine on load of user profile, aka on inital app load,
  // if the intro model should be shown
  if(DataStore.shouldIntroBeShown()){
    $scope.modal.show();
  }


  //introPopup function. This function will be called if the localstorage launchCount value is 0
  //which will signify first time users.
  // var load = localStorage.getItem(&#039;launchCount&#039;);
  //var load = $localstorage.get( &#039;isChecked&#039; );

//POPUP CODE 
//POPUP CODE 
//POPUP CODE 
/*  $scope.desiredCareer = &quot;Serious Job Seeker&quot;;
  $scope.deadline = &quot;&quot;;
  $scope.isChecked = false;

  if(load){
    var introPopup = $ionicPopup.show({
      title: &#039;Welcome!&#039;,
      //subTitle: &quot;Congratulations on beginning your journey as a Serious Job Seeker. To get started, let&#039;s set up your landing page with some immediate goals.&quot;,
      templateUrl: &quot;templates/introPopup.html&quot;,
      scope: $scope,
      buttons: [
        {
          text:&#039;Submit&#039;,
          onTap: function(e){
            //save Desired Career in localStorage
            $localstorage.set( &#039;Desired_Career&#039; , $scope.DesiredCareer );
            $localstorage.set( &#039;Deadline&#039; , $scope.deadline );
            $localstorage.set( &#039;isChecked&#039; , $scope.isChecked );
            $localstorage.set( &#039;isChecked&#039; , true );
          }
        },
      ]
    });
  }*/

  var quoteArray = [{quote:&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.&quot;, cite:&quot;Someone famous&quot;}];
  $scope.quoteObj = quoteArray[0];
  $scope.imageSrc = &#039;css/sjs-logo.png&#039;;
  // I do not set within user
   $scope.picture = JSON.parse(localStorage.getItem(&#039;userProfilePicture&#039;));
   $scope.imageSrc = $scope.picture;


  $scope.user = loadUser();

  $scope.randQuote = function(){
    var i = _.random(0, quoteArray.length -1);
    $scope.quoteObj = quoteArray[i];
  }

  $scope.saveLocal = function(str){
    saveUser($scope.user);
  }

  function onSuccess(imageURI) {
    $scope.picture = imageURI;
    var image = document.getElementById(&#039;profileImage&#039;);
    image.src = imageURI;
  }

  function onFail(message) {
      alert(&#039;Failed because: &#039; + message);
  }

var pictureSource;   // picture source
var destinationType; // sets the format of returned value

// Wait for device API libraries to load
//
document.addEventListener(&quot;deviceready&quot;,onDeviceReady,false);

// device APIs are available
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}


// Called if something bad happens.
//
function onFail(message) {
  alert(&#039;Failed because: &#039; + message);
}

$scope.$watch(&#039;imageSrc&#039;, function(){
  

  // img.src = $scope.imageSrc;
})
  // Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
  // Uncomment to view the image file URI
   console.log(typeof(imageURI) != &#039;undefined&#039;);

  // Get image handle
  var data = &quot;data:image/jpeg;base64,&quot; + imageURI;
  $scope.imageSrc = data;
  localStorage.setItem(&#039;userProfilePicture&#039;, JSON.stringify(data));
  var img = document.getElementById(&#039;profilePic&#039;);
  img.src = data;

}

  // A button will call this function
  $scope.getPhoto = function () {
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50,
        destinationType: destinationType.DATA_URL ,
        sourceType: pictureSource.SAVEDPHOTOALBUM });
    }

$scope.randQuote()

})</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
